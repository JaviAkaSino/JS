<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Retos XI - Javier Parodi</title>
</head>

<body>
    <h1>Tortura Vikinga</h1>
    <script>
        var vikings = '{"vikingos":[{"reino":"Noruega","reyes":["Hakon","Harald",["Ivar",["Olaf","Lars","Lasse"],"Bjorn"],"Ragnar"]},{"reino":"Dinamarca","reyes":["Frodo","Hamming",["Angantyr","Sarunas"],"Horik"]}]}';        // skriv inn koden din her. Vær forsiktig med at json-en jukser. Det er ikke en matrise, men et objekt.

        var es_rey = (nombre) => {

            let es_rey = false;

            let lista = JSON.parse(vikings).vikingos;

            lista.map(x => {
                //console.log(busca_lista_recursiva(x.reyes, nombre));
                if (busca_lista_recursiva(x.reyes, nombre))
                    es_rey = true;
            });

            return es_rey;
        }

        var busca_lista_recursiva = (lista, texto) => {
            
            var esta = false;

            lista.map(x => {

                if (!Array.isArray(x)) { //Si no es un array
                    if (x == texto) { //Y es igual al  texto
                        console.log("Sí");
                        esta = true;
                        return esta;
                    }
                } else {
                    busca_lista_recursiva(x, texto);
                }
            })

            return esta;
        }

        var es_rey_flat = nombre => {

            let es_rey = false;

            let lista = JSON.parse(vikings).vikingos;

            lista.map(x => {

                if (x.reyes.flat(Infinity).find(r => r == nombre) != undefined)
                    es_rey = true;
            });

            return es_rey;
        }
        console.log("¿Es Olaf un rey?");
        es_rey("Olaf") ? console.log("Sí") : console.log("No");
        console.log("¿Es Pepe un rey?");
        es_rey("Pepe") ? console.log("Sí") : console.log("No");

    </script>
</body>

</html>